 -- Ticket dispenser

LIBRARY ieee;
USE ieee.std_logic_1164.ALL;

ENTITY ticket_dispenser IS
	PORT (
		MCLK: IN STD_LOGIC;
		reset: IN STD_LOGIC;
		collet: IN STD_LOGIC; -- collet ticker: tirar o bilhete, simular com meter um switch a 1 e dps 0
		
		HEX0, HEX1, HEX2, HEX3, HEX4, HEX5: OUT STD_LOGIC_VECTOR(7 DOWNTO 0);
		
		Prt : IN STD_LOGIC;
		Rt : IN STD_LOGIC;
		d_id, o_id: STD_LOGIC_VECTOR(3 DOWNTO 0); -- destination & origin
		Fn : OUT STD_LOGIC -- busy
	);
END ticket_dispenser;

ARCHITECTURE arq OF ticket_dispenser IS

	COMPONENT decoderHex IS
        PORT (
            A, B : IN STD_LOGIC_VECTOR(3 DOWNTO 0);
            P : IN STD_LOGIC;
            clear : IN STD_LOGIC;
            HEX0, HEX1, HEX2, HEX3, HEX4, HEX5 : OUT STD_LOGIC_VECTOR(7 DOWNTO 0)
        );
    END COMPONENT;
	 
begin
	
	UdecoderHex : decoderHex PORT MAP(
        A => d_id,
        B => o_id,
        P => Rt,
        clear => reset,
        HEX0 => HEX0,
        HEX1 => HEX1,
        HEX2 => HEX2,
        HEX3 => HEX3,
        HEX4 => HEX4,
        HEX5 => HEX5
    );
	
	Fn <= collet;
	
END arq;